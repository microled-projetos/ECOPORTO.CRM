CREATE SEQUENCE SGIPA.SEQ_LISTAS_EXCESSAO_IMPOSTOS  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  NOCYCLE ;

CREATE TABLE CRM.TB_CRM_OPORTUNIDADES_IMPOSTOS
(
    ID INT NOT NULL PRIMARY KEY,
    MODELOID  INT NOT NULL,
    OPORTUNIDADEID INT NOT NULL,
    SERVICOID INT NOT NULL,
    PIS NUMBER(1,0),
    ISS NUMBER(1,0),
    COFINS NUMBER(1,0),
    VALORPIS NUMBER(18,2),
    VALORISS NUMBER(18,2),
    VALORCOFINS NUMBER(18,2),
    TIPO INT NOT NULL,
    FOREIGN KEY (MODELOID) REFERENCES CRM.TB_CRM_MODELO (Id),
    FOREIGN KEY (OPORTUNIDADEID) REFERENCES CRM.TB_CRM_OPORTUNIDADES (Id)
);

CREATE SEQUENCE CRM.SEQ_CRM_OPORTUNIDADES_IMPOSTOS  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  NOCYCLE ;

CREATE TABLE SGIPA.TB_LISTAS_EXCESSAO_IMPOSTOS
(
    AUTONUM INT NOT NULL PRIMARY KEY,
    LISTA INT NOT NULL,
    SERVICOID INT NOT NULL,    
    IMPOSTOID INT  NOT NULL,    
    ISENTO INT NOT NULL,
    PERCENTUAL INT NOT NULL,
    FOREIGN KEY (LISTA) REFERENCES SGIPA.TB_LISTAS_PRECOS (AUTONUM),
    FOREIGN KEY (SERVICOID) REFERENCES SGIPA.TB_SERVICOS_IPA (AUTONUM)
);

ALTER TABLE CRM.TB_LISTAS_PRECOS ADD IMPOSTOID INT;
ALTER TABLE SGIPA.TB_LISTAS_PRECOS ADD IMPOSTOID INT;

ALTER TABLE CRM.tb_crm_oportunidades MODIFY LOTE VARCHAR2(1000);
ALTER TABLE CRM.tb_crm_oportunidades MODIFY BL VARCHAR2(1000);